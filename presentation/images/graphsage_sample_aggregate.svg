<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="360" viewBox="0 0 900 360" role="img" aria-labelledby="title desc">
  <title id="title">GraphSAGE sample and aggregate illustration</title>
  <desc id="desc">Shows a target node, sampled neighbors highlighted, aggregation operation, and a learned function producing an embedding.</desc>
  <defs>
    <filter id="softShadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="0" dy="6" stdDeviation="8" flood-color="#000" flood-opacity="0.25"/>
    </filter>
    <linearGradient id="blueGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#60a5fa"/>
      <stop offset="100%" stop-color="#06b6d4"/>
    </linearGradient>
  </defs>

  <!-- background panel -->
  <rect width="900" height="360" rx="8" fill="#0f172a"/>

  <!-- cluster of nodes (left) -->
  <g transform="translate(80,70)">
    <!-- faint full cluster -->
    <g opacity="0.22">
      <circle cx="60" cy="40" r="12" fill="#1e293b" stroke="#94a3b8" stroke-width="1"/>
      <circle cx="100" cy="10" r="12" fill="#1e293b" stroke="#94a3b8" stroke-width="1"/>
      <circle cx="140" cy="40" r="12" fill="#1e293b" stroke="#94a3b8" stroke-width="1"/>
      <circle cx="100" cy="70" r="12" fill="#1e293b" stroke="#94a3b8" stroke-width="1"/>
      <circle cx="40" cy="80" r="12" fill="#1e293b" stroke="#94a3b8" stroke-width="1"/>
      <circle cx="180" cy="80" r="12" fill="#1e293b" stroke="#94a3b8" stroke-width="1"/>
    </g>
    <!-- sampled neighbors highlighted -->
    <g>
      <circle cx="60" cy="40" r="14" fill="url(#blueGrad)" stroke="#0369a1" stroke-width="2" filter="url(#softShadow)"/>
      <text x="60" y="45" text-anchor="middle" font-family="Arial" font-size="12" fill="#021124">n1</text>

      <circle cx="140" cy="40" r="14" fill="url(#blueGrad)" stroke="#0369a1" stroke-width="2" filter="url(#softShadow)"/>
      <text x="140" y="45" text-anchor="middle" font-family="Arial" font-size="12" fill="#021124">n2</text>

      <circle cx="100" cy="70" r="14" fill="url(#blueGrad)" stroke="#0369a1" stroke-width="2" filter="url(#softShadow)"/>
      <text x="100" y="75" text-anchor="middle" font-family="Arial" font-size="12" fill="#021124">n3</text>
    </g>

    <!-- target node (center-left) -->
    <g transform="translate(260,32)">
      <circle cx="0" cy="0" r="20" fill="#fbbf24" stroke="#92400e" stroke-width="2"/>
      <text x="0" y="6" text-anchor="middle" font-family="Arial" font-size="12" fill="#021124">v</text>
    </g>

    <!-- arrows from sampled neighbors to target -->
    <g stroke="#fbbf24" stroke-width="2" fill="none">
      <path d="M60 40 C120 40 180 40 260 32" stroke-linecap="round" stroke-opacity="0.9"/>
      <path d="M140 40 C180 46 220 44 260 32" stroke-linecap="round" stroke-opacity="0.9"/>
      <path d="M100 70 C150 70 210 60 260 32" stroke-linecap="round" stroke-opacity="0.9"/>
    </g>
  </g>

  <!-- aggregation box (center) -->
  <g transform="translate(360,120)">
    <rect x="0" y="0" width="180" height="100" rx="8" fill="#0b1220" stroke="#94a3b8" stroke-opacity="0.12"/>
    <text x="90" y="28" text-anchor="middle" font-family="Arial" font-size="14" fill="#60a5fa">AGGREGATE</text>
    <text x="90" y="52" text-anchor="middle" font-family="Arial" font-size="12" fill="#cbd5e1">mean / sum / max / LSTM</text>

    <!-- small stacked neighbor boxes showing combination -->
    <g transform="translate(30,68)">
      <rect x="0" y="0" width="28" height="14" rx="3" fill="#1f2937" stroke="#60a5fa"/>
      <rect x="36" y="0" width="28" height="14" rx="3" fill="#1f2937" stroke="#06b6d4"/>
      <rect x="72" y="0" width="28" height="14" rx="3" fill="#1f2937" stroke="#3b82f6"/>
      <rect x="108" y="0" width="28" height="14" rx="3" fill="#1f2937" stroke="#60a5fa"/>
    </g>
  </g>

  <!-- function box (right) -->
  <g transform="translate(580,120)">
    <rect x="0" y="0" width="220" height="120" rx="8" fill="#041025" stroke="#06b6d4" stroke-opacity="0.16"/>
    <text x="110" y="32" text-anchor="middle" font-family="Arial" font-size="14" fill="#06b6d4">f_θ (learned)</text>
    <path d="M40 56 L80 56" stroke="#06b6d4" stroke-width="2"/>
    <text x="110" y="72" text-anchor="middle" font-family="Arial" font-size="12" fill="#cbd5e1">neural network → embedding</text>

    <!-- embedding vector icon -->
    <g transform="translate(80,84)">
      <rect x="0" y="0" width="140" height="28" rx="4" fill="#011827" stroke="#0ea5a1"/>
      <text x="70" y="14" text-anchor="middle" dominant-baseline="middle" font-family="Courier New, monospace" font-size="11" fill="#06b6d4">h_v = f_θ(AGG(...))</text>
    </g>
  </g>

  <!-- connectors -->
  <g stroke="#94a3b8" stroke-width="1.5" fill="none">
    <path d="M440 140 C500 120 540 120 580 140" stroke-opacity="0.16"/>
  </g>

  <!-- caption -->
  <text x="40" y="320" font-family="Arial" font-size="13" fill="#cbd5e1">Sample neighbors → Aggregate features → Apply learned function to produce node embedding</text>

</svg>
